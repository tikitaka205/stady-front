<!DOCTYPE html>
<html lang="ko" class="h-100">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors" />
    <meta name="generator" content="Hugo 0.104.2" />
    <title>STADY</title>
    <!-- css 파일 -->
    <link href="/static/css/bootstrap.min.css?after" rel="stylesheet" />
    <link href="/static/css/base.css?after" rel="stylesheet" />
    <!-- bootstrap css cdn -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- font awesome 5.14.5-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <!-- JS 파일 -->
    <script src="/static/js/bootstrap.bundle.min.js?after"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-modal/2.2.6/js/bootstrap-modalmanager.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->

    <style>
        h5 {
            height: 20px;
        }

        .stady_btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .stady_wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .cam_size {
            width: 375px;
            height: 375px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;

            background-color: #e9ecef;
            margin-bottom: 10px;
        }

        .nav_logo {
            width: 100px;
            height: 40px;
        }

        .card-img-top {
            height: 250px;
            object-fit: cover;
        }

        .card-body {
            padding: 10px 15px 15px;
            height: 120px;
        }

        .card-title {
            height: 33px;
            font-size: 25px;
            font-weight: 600;
            margin-bottom: 5px;
            overflow-y: hidden;
        }

        #study-title {
            font-size: 50px;
            font-weight: 700;
        }

        p {
            font-size: 12px;
            color: gray;
            margin-bottom: 3px;
        }

        #main_nav {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
      background-color: #eaeaea;
      width: 100%;
      margin: 0 auto;
    }
    </style>
</head>

<body id="body" class="" style="background-color: #00b395;">
    <div class="w-100 h-100 p-3 mx-auto">
        <header class="mb-auto" style="background-color: rgb(255, 255, 255); max-width: 720px; margin: 0 auto;">
            <div class="contain">
              <div class="fixed-top" id="main_nav" style="width: 100%;">
                <h3 class="float-md-start mb-0">
                  <a href="/">
                    <img class="nav_logo" src="/static/images/stady_1.png" style="margin-left: 30px;" />
                  </a>
                </h3>
                <nav class="nav nav-masthead justify-content-center float-md-end" style="margin-right: 30px;">
                  <div class="nav nav-masthead justify-content-center float-md-end" style="margin-right: 50px;">
                  <a class="nav-link fw-bold py-1 px-0" aria-current="true" style="color: black; margin-right: 30px; font-size: 20px;" href="/">STADY</a>
                  <a class="nav-link fw-bold py-1 px-0" aria-current="true" style="color: black; margin-right: 30px; font-size: 20px;" href="/community/index.html">커뮤니티</a>
                  <a class="nav-link fw-bold py-1 px-0" aria-current="true" style="color: black; margin-right: 30px; font-size: 20px;" href="/study_group/index.html">소모임</a>
                  </div>
      
                  <div style="margin-left: 20px; margin-right: 10px;">
                    <div class="post_header_more_btn_box">
                      <div class="btn-group">
                        <img type="button" class="img_circle dropdown-toggle" width="30px" height="30px"
                          src="/static/images/stady_bear_face.png" data-bs-toggle="dropdown" aria-expanded="false" style="margin-top: 2px;" />
                        <ul class="dropdown-menu">
                          <li>
                            <a class="dropdown-item" href="/profile/profile.html">프로필</a>
                          </li>
                          <li>
                            <a class="dropdown-item" href="/user/update.html">회원정보수정</a>
                          </li>
                          <li>
                            <a class="dropdown-item" href="javascript:handleLogout();">로그아웃</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </nav>
              </div>
            </div>
      
          </header>

        <main class="container" style="height: 500px; margin-top : 100px;">

            <div class="input-group text-center">
                <div class="form-outline"
                    style="justify-content: center; align-items: center; display: flex;width: 100%; margin-bottom: 20px;">
                    <button class="btn btn-primary" style="margin-right: 20px;" type="button" onclick="createPost()">스터디
                        모집하기</button>
                    <input type="text" name="search_input" id="search_input" onchange="search()" placeholder="검색">
                    <i class="fas fa-search" style="margin-left: 5px;"></i>
                </div>
            </div>
            <div style="justify-content: center; align-items: center; display: flex;width: 100%;">

            </div>

            <div class="row" id="main-recommend-wrap">
            </div>
            <div class="row text-start" id="main-wrap">
            </div>


            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="1"
                aria-labelledby="staticBackdropLabel" aria-hidden="true" style="">
                <div class="modal-dialog modal-xl" style="border-radius: 10px; overflow: hidden;">
                    <div class="modal-content">
                        <div class="modal-body" style="padding: 0;">
                            <div id="modal-head" class="" style="height: 400px; ">

                                <div class="" style="align-self: end;">
                                    <b>
                                        <h3 id="study-title" class="text-start" style="color: white;"></h3>
                                    </b>
                                    <button id="status" style="height: 35px; font-size: 15px; margin-right: 10px;"
                                        type="button" class="btn btn-primary">Understood</button>
                                    <i class="fas fa-user-alt" style="font-size: 25px; color : white;"></i>
                                    <span id="study-ratio" class="p-1"
                                        style="color: white; border: 1px solid white; border-radius: 20%; margin-right: 10px;"></span>
                                    <span style="cursor: pointer;" id="study-like"><i id="star"
                                            style="color : yellow; font-size : 25px"></i></span>
                                    <!-- <span style="color: white;">태그들 있을 예정</span> -->
                                </div>
                                <i class="fas fa-times text-end" data-bs-dismiss="modal" aria-label="Close"
                                    style="margin-left: auto; cursor: pointer; color: rgb(255, 255, 255); font-size: 30px;"></i>
                            </div>
                        </div>
                        <div class="modal-footer" style="display: block; text-align: left;">
                            <div class="mb-4" style="padding: 5px 15px">
                                <h5 id="author" class="text-secondary mb-3"></h5>
                                <span class="mb-1" style="font-size: 20px; font-weight : 500;">모집 내용</span>
                                <div id="content" class="mb-3"
                                    style="border-radius: 15px; border: 2px solid black; padding: 15px;">

                                </div>
                                <div id="study-tags">

                                </div>

                                <div id="student_list">

                                </div>
                            </div>


                            <div>
                                <img width="40px" src="/static/images/stady_bear_face.png" alt="">
                                <span
                                    style="height: 25px; padding: 3px ;font-size: 20px; border-radius : 12.5px; background-color: antiquewhite;"
                                    class="text-center">
                                    테디가 분석해 봤어요. 어떤가요~?
                                </span>
                            </div>
                            <div id="recommend-wrap" class="row"
                                style="background-color: #00b395; border-radius: 10px; padding: 10px;">
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div style="justify-content: center; align-items: center; display: flex;width: 100%;">
                <div style="margin-right: 10px;"><button class="btn btn-primary" type="button"
                        onclick="location.href='' " id="previous">이전</button>
                </div>
                <div><button class="btn btn-primary" type="button" onclick="location.href='' " id="next">다음</button>
                </div>
            </div>
        </main>


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        
        <script src="/static/js/study_group.js"></script>
        <script>
            // const hostUrl = 'http://127.0.0.1:8000'
            loadStudy()
            // function loadStudy() {

            //     const mainWrap = document.getElementById('main-wrap');
            //     const recommendWrap = document.getElementById('recommend-wrap');

            //     $.ajax({
            //         type: 'GET',

            //         data: {},
            //         headers: {
            //             "Authorization": "Bearer " + localStorage.getItem("access"),
            //         },

            //         url: `${hostUrl}/studies/`,

            //         success: function (result) {
            //             console.log("------------------------")
            //             console.log()
            //             console.log('next:', result['results']['studies'].length);
            //             let allTemp = ``
            //             for (var i = 0; i < result['results']['studies'].length; i++) {
            //                 var study = result['results']['studies'][i]
            //                 console.log(study)
            //                 var temp = `
            //                     <div class="mb-3 col-md-4 col-sm-6 p-2" style="cursor: pointer;">
            //                         <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(${study.id})">
            //                             <img src="${hostUrl}${study.thumbnail_img}" type="button" class="card-img-top" alt="...">
            //                             <div class="card-body">
            //                                 <h5 class="card-title">${study.title}</h5>
            //                                 <p class="text-start" style =" overflow-x : hidden;">
            //                                     ${study.user}
            //                                 </p>
            //                                 <p>
            //                                     <i class="fas fa-user-alt" style="color:tomato;"></i> ${study.now_cnt}/${study.headcount}
            //                                 </p>
                                                
            //                                     <div class = "text-start" style ="height : 30px; overflow-y : hidden;"><i class="fas fa-tags" style="color : yellowgreen"></i> ${study.tags}</div>
            //                             </div>
            //                         </div>
            //                     </div>
            //                     `
            //                 allTemp += temp
            //             }
            //             $('#main-wrap').html(allTemp)

            //             let allRecommendTemp = ``
            //             for (var i = 0; i < result['results']['recommend_studies'].length; i++) {
            //                 var study = result['results']['recommend_studies'][i]
            //                 console.log(study)
            //                 var temp = `
            //             <div class="mb-3 col-md-4 col-sm-6 p-2" style="cursor: pointer;">
            //             <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(${study.id})">
            //                 <img src="${hostUrl}${study.thumbnail_img}" type="button" class="card-img-top" alt="...">
            //                 <div class="card-body">
            //                     <h5 class="card-title">${study.title}</h5>
            //                     <p class="text-start" style =" overflow-x : hidden;">
            //                         ${study.user}
            //                     </p>
            //                     <p>
            //                         <i class="fas fa-user-alt" style="color:tomato;"></i> ${study.now_cnt}/${study.headcount}
            //                     </p>
                                    
            //                         <div class = "text-start" style ="height : 30px; overflow-y : hidden;"><i class="fas fa-tags" style="color : yellowgreen"></i> ${study.tags}</div>
            //                         <div class = "text-end" style = "position : absolute; right : 20px; top:20px;">
            //                             <i style="color : tomato" class="fas fa-user-check">추천</i>
            //                         </div>
            //                 </div>
            //             </div>
            //         </div>
            //         `
            //                 allRecommendTemp += temp
            //             }
            //             $('#main-recommend-wrap').html(allRecommendTemp)
            //             $('#next').attr('onclick', `page("${result.next}")`)
            //             $('#previous').attr('onclick', `page("${result.previous}")`)
            //         },
            //     });
            // }

            // function page(page) {
            //     console.log(page);
            //     const mainWrap = document.getElementById('main-wrap');
            //     const recommendWrap = document.getElementById('recommend-wrap');

            //     $.ajax({
            //         type: 'GET',

            //         data: {},
            //         headers: {
            //             "Authorization": "Bearer " + localStorage.getItem("access"),
            //         },

            //         url: page,

            //         success: function (result) {
            //             console.log('성공:', result['studies']);
            //             let allTemp = ``
            //             for (var i = 0; i < result['results']['studies'].length; i++) {
            //                 var study = result['results']['studies'][i]
            //                 console.log(study)
            //                 var temp = `
            //                     <div class="mb-3 col-md-4 col-sm-6 p-2" style="cursor: pointer;">
            //                         <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(${study.id})">
            //                             <img src="${hostUrl}${study.thumbnail_img}" type="button" class="card-img-top" alt="...">
            //                             <div class="card-body">
            //                                 <h5 class="card-title">${study.title}</h5>
            //                                 <p class="text-start" style =" overflow-x : hidden;">
            //                                     ${study.user}
            //                                 </p>
            //                                 <p>
            //                                     <i class="fas fa-user-alt" style="color:tomato;"></i> ${study.now_cnt}/${study.headcount}
            //                                 </p>
                                                
            //                                     <div class = "text-start" style ="height : 30px; overflow-y : hidden;"><i class="fas fa-tags" style="color : yellowgreen"></i> ${study.tags}</div>
            //                             </div>
            //                         </div>
            //                     </div>
            //                     `
            //                 allTemp += temp
            //             }
            //             $('#main-wrap').html(allTemp)

            //             let allRecommendTemp = ``
            //             for (var i = 0; i < result['results']['recommend_studies'].length; i++) {
            //                 var study = result['results']['recommend_studies'][i]
            //                 console.log(study)
            //                 var temp = `
            //                     <div class="mb-3 col-md-4 col-sm-6 p-2" style="cursor: pointer;">
            //                     <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(${study.id})">
            //                         <img src="${hostUrl}${study.thumbnail_img}" type="button" class="card-img-top" alt="...">
            //                         <div class="card-body">
            //                             <h5 class="card-title">${study.title}</h5>
            //                             <p class="text-start" style =" overflow-x : hidden;">
            //                                 ${study.user}
            //                             </p>
            //                             <p>
            //                                 <i class="fas fa-user-alt" style="color:tomato;"></i> ${study.now_cnt}/${study.headcount}
            //                             </p>
                                            
            //                                 <div class = "text-start" style ="height : 30px; overflow-y : hidden;"><i class="fas fa-tags" style="color : yellowgreen"></i> ${study.tags}</div>
            //                                 <div class = "text-end" style = "position : absolute; right : 20px; top:20px;">
            //                                     <i style="color : tomato" class="fas fa-user-check">추천</i>
            //                                 </div>
            //                         </div>
            //                     </div>
            //                 </div>
            //                 `
            //                 allRecommendTemp += temp
            //             }
            //             $('#main-recommend-wrap').html(allRecommendTemp)
            //             $('#next').attr('onclick', `page("${result.next}")`)
            //             $('#previous').attr('onclick', `page("${result.previous}")`)
            //         },
            //     });
            // }

            // function viewStudy(study_id) {

            //     const modal = document.getElementById('staticBackdrop');
            //     let tumbnailImg = document.getElementById('tumbnail-img');
            //     console.log(study_id)

            //     $.ajax({
            //         type: 'GET',

            //         data: {},
            //         headers: {
            //             "Authorization": "Bearer " + localStorage.getItem("access"),
            //         },

            //         url: `${hostUrl}/studies/${study_id}/`,

            //         success: function (result) {
            //             let studyDetail = result["study_detail"]
            //             let recommendStudies = result["recommend_studies"]
            //             console.log('성공:', result, result['thumbnail_img']);
            //             // $('#thumbnail-img').attr('src', result['thumbnail_img']);
            //             $('#modal-head').attr('style', `background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2)), url(${hostUrl}${studyDetail['thumbnail_img']});
            //                                 background-position: center;
            //                                 background-size: cover;
            //                                 height : 450px;
            //                                 display: flex;
            //                                 padding : 35px
            //     `)
            //             $('#study-title').text(studyDetail['title'])
            //             $('#author').text(studyDetail['user'])
            //             $('#content').html(studyDetail['content'])

            //             let isStudent = studyDetail['is_student']
            //             let isAuthor = studyDetail['is_author']
            //             let sended = studyDetail['sended']
            //             let onOffLine = studyDetail['on_off_line']
            //             let isLike = studyDetail['is_like']
            //             let headCount = studyDetail['headcount']
            //             let nowCnt = studyDetail['now_cnt']
            //             let tags = studyDetail['tags']

            //             $('#study-ratio').text(`${nowCnt}/${headCount}`)
            //             $('#study-tags').html(`<div class = "text-start" style ="height : 30px; overflow-y : hidden;"><i class="fas fa-tags" style="color : yellowgreen"></i> ${tags}</div>`)

            //             if (isAuthor) {
            //                 $('#status').text('수정 하기')
            //                 $('#status').attr('class', 'btn btn-outline-warning')

            //             } else if (isStudent) {
            //                 $('#status').text('탈퇴 하기')
            //                 $('#status').attr('onclick', `propose(${studyDetail.id}, "cancle")`)
            //             } else if (sended) {
            //                 $('#status').html('<i class="fas fa-times">신청취소</i>')
            //                 $('#status').attr('onclick', `propose(${studyDetail.id}, "cancle")`)
            //                 $('#status').attr('class', 'btn btn-outline-danger')
            //             } else {
            //                 $('#status').html('<i class="fas fa-paper-plane">신청하기</i>')
            //                 $('#status').attr('onclick', `propose(${studyDetail.id}, "propose")`)
            //                 $('#status').attr('class', 'btn btn-primary')
            //             }

            //             if (isLike) {
            //                 $('#star').attr('class', 'fas fa-star')
            //             } else {
            //                 $('#star').attr('class', 'far fa-star')
            //             }
            //             $('#star').attr('onclick', `studyLike(${studyDetail.id})`)

            //             if (recommendStudies) {
            //                 loadRecommendStudy(recommendStudies)
            //             }
            //         },

            //     });
            //     $('#staticBackdrop').modal('show')
            // }
            // function propose(study_id, type) {
            //     console.log('dd')
            //     $.ajax({
            //         type: 'GET',

            //         data: { type: type },
            //         headers: {
            //             "Authorization": "Bearer " + localStorage.getItem("access"),
            //         },

            //         url: `${hostUrl}/studies/${study_id}/propose`,

            //         success: function (result) {
            //             if (type === "propose") {
            //                 $('#status').html('<i class="fas fa-times">신청취소</i>')
            //                 $('#status').attr('onclick', `propose(${study_id}, "cancle")`)
            //                 $('#status').attr('class', 'btn btn-outline-danger')
            //             } else if (type === "cancle") {
            //                 $('#status').html('<i class="fas fa-paper-plane">신청하기</i>')
            //                 $('#status').attr('onclick', `propose(${study_id}, "propose")`)
            //                 $('#status').attr('class', 'btn btn-primary')
            //             }

            //         },
            //     });
            // }
            // function loadRecommendStudy(recommendStudy) {
            //     let allTemp = ``
            //     for (var i = 0; i < recommendStudy.length; i++) {
            //         var study = recommendStudy[i]
            //         console.log(study)
            //         var temp = `
            //     <div class="col-lg-4 col-md-6" style="cursor: pointer; padding : 15px">
            //                 <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(${study.id})">
            //                     <img src="${hostUrl}${study.thumbnail_img}" type="button" class="card-img-top" alt="...">
            //                     <div class="card-body">
            //                         <h5 class="card-title">${study.title}</h5>
            //                         <p class="text-start text-second" style =" overflow-x : hidden;">
            //                             ${study.user} </br>
            //                             <i class="fas fa-user-alt" style="color:tomato"></i> ${study.now_cnt}/${study.headcount}
            //                             <div class = "text-start" style ="height : 30px; overflow-y : hidden;"><i class="fas fa-tags" style = "color : yellowgreen;"></i> ${study.tags}</div>
            //                         </p>
                                    
            //                     </div>
            //                 </div>
            //             </div>
            // `
            //         allTemp += temp
            //     }
            //     $('#recommend-wrap').html(allTemp)
            // }

            // function studyLike(study_id) {
            //     $.ajax({
            //         type: 'GET',

            //         data: {},
            //         headers: {
            //             "Authorization": "Bearer " + localStorage.getItem("access"),
            //         },

            //         url: `${hostUrl}/studies/${study_id}/like`,

            //         success: function (result) {
            //             var starClass = $('#star').attr('class')
            //             if (starClass === 'fas fa-star') {
            //                 $('#star').attr('class', 'far fa-star')
            //             } else {
            //                 $('#star').attr('class', 'fas fa-star')
            //             }
            //         },
            //     });
            // }



            // function search() {
            //     const mainWrap = document.getElementById('main-wrap');
            //     let search_input = document.getElementById("search_input").value;
            //     console.log('검색성공')

            //     $.ajax({
            //         type: 'GET',

            //         data: {},
            //         headers: {
            //             "Authorization": "Bearer " + localStorage.getItem("access"),
            //         },

            //         url: `${hostUrl}/studies/search/?search=${search_input}`,

            //         success: function (result) {
            //             console.log('성공:', result);
            //             let allTemp = ``
            //             for (var i = 0; i < result.length; i++) {
            //                 var study = result[i]
            //                 console.log(study)
            //                 var temp = `
            //             <div class="mb-3 col-md-4 col-sm-6 p-2" style="cursor: pointer;">
            //                 <div id="study" style="background-color: white; border-radius : 5px" onclick="viewStudy(${study.id})">
            //                     <img src="${hostUrl}${study.thumbnail_img}" type="button" class="card-img-top" alt="...">
            //                     <div class="card-body">
            //                         <h5 class="card-title">${study.title}</h5>
            //                         <p class="text-start text-second">
            //                             ${study.user} </br>
            //                             <i class="fas fa-user-alt"></i> ${study.now_cnt}/${study.headcount}</br>
            //                             <span><i class="fas fa-tags"></i> ${study.tags}</span></br>
            //                         </p>
            //                     </div>
            //                 </div>
            //             </div>
            //         `
            //                 allTemp += temp
            //             }
            //             $('#main-wrap').html(allTemp)
            //         },

            //     });
            // }
        </script>
        <script src="/static/js/api.js"></script>
        <script src="/static/js/user.js"></script>
        
</body>

</html>